<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <meta name="description" 
    content="tyrad的个人技术博客，主要关注移动互联网,iOS,Flutter,Java,H5,Linux等技术。"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="4GHpSI8Or6aARE0YwdGyiIPg2Xpo01z1VvqQu9o2n1M" />
    <title>ngrok |  TYRAD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="https://www.tyrad.cc/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://www.tyrad.cc/css/spectre-exp.min.css" />
    <link rel="stylesheet" href="https://www.tyrad.cc/css/spectre-icons.css" />
    <link rel="stylesheet" href="https://www.tyrad.cc/css/spectre.min.css" />
    <link rel="stylesheet" href="https://www.tyrad.cc/css/theme.min.css" />
    <link rel="stylesheet" href="https://www.tyrad.cc/css/blog.css" />
    <link rel="stylesheet" href="https://www.tyrad.cc/css/override.css" /></head>

<body id="top"
    class="header-fixed header-animated sticky-footer ">
    <div id="page-wrapper">
        <section id="header" class="section">
            <section class="container grid-lg">
                <nav class="navbar">
                    <section class="navbar-section logo">
                        <a href="https://www.tyrad.cc" class="navbar-brand mr-10">
    
    

    <svg height="146px" viewBox="0 0 452 146" version="1.1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="black-37249" transform="translate(1.493827, 14.000000)" fill="#000000" fill-rule="nonzero">
                <path
                    d="M49.1575565,105.3356 C58.6514419,107.744266 56.8866035,117.059598 47.336582,117.946151 C42.200257,119.088059 32.5122345,116.823453 40.3049269,121.756528 C38.9160522,122.059136 31.4488504,121.215252 34.0530212,124.835545 C49.3931802,133.332539 76.1538235,115.03264 58.9252282,100.789887 C52.729951,96.9744155 44.6696275,99.6170026 49.1574334,105.335227 L49.1575565,105.3356 Z"
                    id="路径"></path>
                <path
                    d="M19.6456893,70.1148 C22.442564,67.6540154 27.5058454,64.8429245 31.2812983,65.0068451 C34.6705665,65.8322497 35.5828047,67.0095653 39.186732,72.7438254 C42.8052895,78.5014146 47.9529463,97.2035504 46.1250646,102.790183 C44.2922642,108.392369 38.9206152,112.836988 32.033488,115.798916 C26.5426541,118.077388 16.2140442,117.216187 11.6635736,112.33745 C7.2203064,106.943992 10.4439768,99.2077518 14.1196674,94.0765913 C17.8286541,88.8988961 15.684207,74.5702816 19.6458155,70.1143062 L19.6456893,70.1148 Z"
                    id="路径"></path>
                <path
                    d="M1.04535518,39.6272974 C4.05921119,39.3911165 4.59137567,39.1071824 5.59060008,38.0238167 C6.58982449,36.9404509 5.54928544,35.2576243 6.19663273,34.5114663 C6.84398002,33.7653083 8.10097246,32.9215361 9.07530028,33.5952113 C10.0496281,34.2688865 10.1138613,37.3267543 9.37831661,38.4819379 C8.64277193,39.6371215 5.43905457,40.0090086 5.43905457,40.0090086 L-0.469776243,41.8414683 C-1.16205066,72.2197737 13.1673278,72.6175072 32.5592772,62.9150689 C34.2888429,65.128073 36.8652659,66.7978007 39.3430985,68.5308898 C41.0289707,68.9713953 42.7656319,69.3673848 46.0436407,68.4125409 C52.7893702,66.6134557 67.7858277,37.9865577 58.6189054,24.5853236 C59.5609921,22.3072017 58.5329188,17.6980103 54.831139,9.92564579 C51.5837531,14.9810013 48.3835461,17.0014121 44.9911376,18.7424057 C39.7628549,17.4246155 36.1260864,16.8411895 31.0440711,17.2556102 C32.114064,10.6923806 28.9520111,5.60816741 24.8321244,0 C14.7334474,6.21819269 9.90786696,14.7224118 6.65139374,20.7687134 C4.38306595,26.7113784 -1.96157957,39.8636841 1.04555436,39.6278043 L1.04535518,39.6272974 Z"
                    id="路径"></path>
            </g>
            <text id="TYRAD" font-family="STBaoliSC-Regular, Baoli SC" font-size="116" font-weight="normal"
                fill="#000000">
                <tspan x="87" y="106">TYRAD</tspan>
            </text>
        </g>
    </svg>

    
    

    
</a>
                    </section>
                    <section class="navbar-section desktop-menu">
                        <nav class="dropmenu animated">

<ul class=""><li>
        <a href="/" title="Home page"
            class="">Home</a>
    </li><li>
        <a href="/archives/" title="Archives page"
            class="">Archives</a>
    </li><li>
        <a href="/wiki/" title="Wiki page"
            class="">Wiki</a>
    </li><li>
        <a href="/tools/" title="Tools page"
            class="">Tools</a>
        <ul><li>
                <a href="/tools/json/" class="">JSON解析</a>
            </li><li>
                <a href="/tools/rsa/" class="">RSA测试</a>
            </li><li>
                <a href="/tools/knowlegenav/" class="">导航</a>
            </li></ul>
    </li><li>
        <a href="/about/" title="About page"
            class="">About</a>
    </li></ul></nav>
                    </section>
                </nav>
            </section>
        </section>
        <div class="mobile-menu">
            <div class="button_container" id="toggle">
                <span class="top"></span>
                <span class="middle"></span>
                <span class="bottom"></span>
            </div>
        </div>

<section id="blog-hero" class="section 
modular-hero hero text-dark title-h1h2 overlay-dark-gradient hero-tiny parallax"
    style="padding-top: 4rem;padding-bottom: 0;">
    <section class="container grid-lg" style="text-align: center">
        <h2> ngrok </h2>
        <h2 style="margin-top: 1rem;"></h2>
        

<span class="breadcrumbs" style="padding-right:40px;">
    <i class="fa fa-bookmark" aria-hidden="true"></i>
    
    
    
    
    
    
    
    
    <span><a href='https://www.tyrad.cc/wiki'>wiki</a></span> &nbsp/&nbsp
    
    
    
    
    
    
    <span><a href='https://www.tyrad.cc/wiki#linux'>linux</a></span>
    
    
    
    
    
    
    
    
    
</span>

        <span class="blog-date">
            <time class="dt-published" datetime='2017-07-13T18:19:10.000&#43;00:00'
                itemprop="datePublished">
                <i class="fa fa-calendar"></i> 2017-07-13
            </time>
        </span>
        <span class="tags">
            
        </span>
    </section>
</section>
<section id="start">
    <section id="body-wrapper" class="section blog-listing post-content">
        <section class="container grid-lg">
            <div class="columns">
                <div id="item"
                    class="column  col-10  col-md-12 extra-spacing blog-content">

<h1 id="下载编译好的客户端-服务端">下载编译好的客户端/服务端</h1>

<p>（2017年07月18日 更新）</p>

<p>发现自己编译的客户端跑在mac Sierra系统出现问题,暂时没有解决,这里下载编译好的客户端/服务端文件</p>

<blockquote>
<p><a href="http://www.ittun.com/apply.html">http://www.ittun.com/apply.html</a></p>
</blockquote>

<h2 id="服务端启动命令">服务端启动命令</h2>

<p>例子:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#000">.</span><span style="color:#000">/</span><span style="color:#000">ngrokd</span> <span style="color:#000">-</span><span style="color:#000">domain</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;ngrok.xxx.com&#34;</span>  <span style="color:#000">-</span><span style="color:#000">httpAddr</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;:8080&#34;</span> <span style="color:#000">-</span><span style="color:#000">httpsAddr</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;:8087&#34;</span> <span style="color:#000">-</span><span style="color:#000">tunnelAddr</span><span style="color:#000">=</span><span style="color:#c41a16">&#34;:4443&#34;</span></code></pre></div>
<p>后台一直执行:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#000">nohup</span> <span style="color:#000">bin</span><span style="color:#c41a16">/ngrokd -domain=&#34;ngrok.xxx.com&#34; -httpAddr=&#34;:8080&#34;  -httpsAddr=&#34;:8087&#34; -tunnelAddr=&#34;:44443&#34; &amp;  </span></code></pre></div>
<h2 id="客户端配置">客户端配置</h2>

<p>客户端配置过程不变</p>

<h1 id="自己编译客户端">自己编译客户端</h1>

<h2 id="安装git-golang">安装git、golang</h2>

<h3 id="安装git">安装git</h3>

<p>安装依赖工具:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#177500"># 安装依赖</span>
yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel
yum install  gcc perl-ExtUtils-MakeMaker

<span style="color:#177500"># 删除已有 git</span>
yum remove git

<span style="color:#177500"># 下载源码</span>
<span style="color:#a90d91">cd</span> /usr/src
wget -c wget -c https://github.com/git/git/archive/v2.13.3.tar.gz git-v2.13.3.tar.gz
tar xzf git-v2.13.3.tar.gz

<span style="color:#177500"># 编译安装</span>
<span style="color:#a90d91">cd</span> git-2.13.3
make <span style="color:#000">prefix</span><span style="color:#000">=</span>/usr/local/git all
make <span style="color:#000">prefix</span><span style="color:#000">=</span>/usr/local/git install
<span style="color:#a90d91">echo</span> <span style="color:#c41a16">&#34;export PATH=</span><span style="color:#000">$PATH</span><span style="color:#c41a16">:/usr/local/git/bin&#34;</span> &gt;&gt; /etc/bashrc
<span style="color:#a90d91">source</span> /etc/bashrc</code></pre></div>
<p>查看版本</p>

<pre><code>[root@iZ2ze147skj2icrqqx7nhzZ ~]# git --version
git version 2.13.3
</code></pre>

<h3 id="安装golang">安装golang</h3>

<pre><code>yum install golang
</code></pre>

<p>查看版本:</p>

<pre><code># go version
go version go1.6.3 linux/amd64
</code></pre>

<p>go env 查看环境变量:</p>

<pre><code>[root@iZ2ze147skj2icrqqx7nhzZ ~]# go env
GOARCH=&quot;amd64&quot;
GOBIN=&quot;&quot;
GOEXE=&quot;&quot;
GOHOSTARCH=&quot;amd64&quot;
GOHOSTOS=&quot;linux&quot;
GOOS=&quot;linux&quot;
GOPATH=&quot;&quot;
GORACE=&quot;&quot;
GOROOT=&quot;/usr/lib/golang&quot;
GOTOOLDIR=&quot;/usr/lib/golang/pkg/tool/linux_amd64&quot;
GO15VENDOREXPERIMENT=&quot;1&quot;
CC=&quot;gcc&quot;
GOGCCFLAGS=&quot;-fPIC -m64 -pthread -fmessage-length=0&quot;
CXX=&quot;g++&quot;
CGO_ENABLED=&quot;1&quot;
</code></pre>

<h2 id="配置ngrok">配置ngrok</h2>

<p>1). clone到本地</p>

<pre><code>git clone https://github.com/inconshreveable/ngrok.git  ~/ngrok
</code></pre>

<p>2). 配置环境变量</p>

<pre><code>export NGROK_DOMAIN=&quot;tunnel.mydomain.com&quot;  
</code></pre>

<p>tunnel.mydomain.com替换成你自己的域名。</p>

<p>4). 生成自签名ssl证书</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#a90d91">cd</span> ngrok

openssl genrsa -out rootCA.key <span style="color:#1c01ce">2048</span>

openssl req -x509 -new -nodes -key rootCA.key -subj <span style="color:#c41a16">&#34;/CN=</span><span style="color:#000">$NGROK_DOMAIN</span><span style="color:#c41a16">&#34;</span> -days <span style="color:#1c01ce">5000</span> -out rootCA.pem

openssl genrsa -out device.key <span style="color:#1c01ce">2048</span>

openssl req -new -key device.key -subj <span style="color:#c41a16">&#34;/CN=</span><span style="color:#000">$NGROK_DOMAIN</span><span style="color:#c41a16">&#34;</span> -out device.csr

openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days <span style="color:#1c01ce">5000</span>

cp rootCA.pem assets/client/tls/ngrokroot.crt
cp device.crt assets/server/tls/snakeoil.crt
cp device.key assets/server/tls/snakeoil.key  </code></pre></div>
<h2 id="编译服务端">编译服务端</h2>

<blockquote>
<p>路径以实际安装路径为准</p>
</blockquote>

<p>从<code>go env</code>可以看到我的GOROOT <code>GOROOT=&quot;/usr/lib/golang&quot;</code></p>

<pre><code>cd /usr/lib/golang/src
GOOS=linux GOARCH=amd64 ./make.bash #(64位)    

cd ~/ngrok/
GOOS=linux GOARCH=386 make release-server   #(32 )
GOOS=linux GOARCH=amd64 make release-server #（64位）
</code></pre>

<p>结果会在<code>ngork/bin</code>下生成<code>ngrokd</code>文件。  还有一个<code>go-bindata</code>文件。</p>

<h2 id="编译客户端">编译客户端</h2>

<p>要生成对应平台的客户端程序，需要继续进行交叉编译。</p>

<blockquote>
<p>路径以实际安装路径为准</p>
</blockquote>

<p><strong>Linux</strong></p>

<pre><code>#如果是32位系统把amd64改成386

cd /usr/lib/golang/src
GOOS=linux GOARCH=amd64 ./make.bash #(64位)    

cd ~/ngrok/
GOOS=linux GOARCH=amd64 make release-client #（64位） 生成`linux_386`文件
</code></pre>

<p><strong>macOS</strong></p>

<pre><code># MAC OS 64位操作系统（32位系统把amd64改成386）

cd /usr/lib/golang/src
GOOS=darwin GOARCH=amd64 ./make.bash   

cd ~/ngrok/
GOOS=darwin GOARCH=amd64 make release-client  #（64位） 生成`darwin_amd64`文件
</code></pre>

<p><strong>windows</strong></p>

<pre><code># Windows 64位操作系统（32位系统把amd64改成386）

cd /usr/lib/golang/src
GOOS=windows GOARCH=amd64 ./make.bash
cd ~/ngrok/
GOOS=windows GOARCH=amd64 make release-client 
</code></pre>

<h2 id="运行">运行</h2>

<h3 id="启动服务端">启动服务端</h3>

<pre><code>cd ~/ngrok/bin
#以8080端口为例
#请将`tunnel.mydomain.com`替换成自己的域名
./ngrokd -domain=&quot;tunnel.mydomain.com&quot; -httpAddr=&quot;:8080&quot;

#完整的参数
./ngrokd -domain=&quot;tunnel.mydomain.com&quot; -httpAddr=&quot;:8080&quot; -httpsAddr=&quot;:443&quot; -tunnelAddr=&quot;:4443&quot;
</code></pre>

<p>./ngrokd -domain=&ldquo;tunnel.tyrad.cc&rdquo; -httpAddr=&rdquo;:8080&rdquo; -httpsAddr=&rdquo;:8087&rdquo;</p>

<p>访问: <code>https://tunnel.mydomain.com:8080</code>,如果发现<code>Tunnel tunnel.mydomain.com not found</code> 说明启动成功</p>

<p>后台一直执行:</p>

<pre><code>nohup bin/ngrokd -domain=&quot;tunnel.mydomain.com&quot; -httpAddr=&quot;:8080&quot; &amp;  
</code></pre>

<p>nohup ./ngrokd -domain=&ldquo;tunnel.tyrad.cc&rdquo; -httpAddr=&rdquo;:8080&rdquo; -httpsAddr=&rdquo;:8087&rdquo; &amp;</p>

<p>杀死:</p>

<pre><code>ps -A   #找到ngrokd的PID  
kill xxx
</code></pre>

<h3 id="启动客户端">启动客户端</h3>

<p>下载客户端,以macOS为例,需要下载<code>~/ngork/bin/darwin_amd64/ngrok</code>文件。</p>

<p>修改<code>ngrok</code>文件的权限:</p>

<pre><code>chmod +x ngrok
</code></pre>

<p>创建文件<code>ngrok.cfg</code>,并编辑内容为(tunnel.mydomain.com替换成自己的域名):</p>

<pre><code>server_addr: &quot;tunnel.mydomain.com:4443&quot;
trust_host_root_certs: false
</code></pre>

<p>并将<code>ngrok</code>和<code>ngrok.cfg</code>放到同一个文件夹下。</p>

<p>启动(xx是随便输入,相当于三级域名了):</p>

<pre><code>./ngrok -config=ngrok.cfg -subdomain xxx  80
</code></pre>

<p>可以看到启动成功:</p>

<p><img src="http://image.tyrad.cc/2017071427797success.png" alt="2017071427797success.png" /></p>

<h2 id="错误分析">错误分析</h2>

<p><strong>编译报错:</strong></p>

<p>执行<code>GOOS=linux GOARCH=amd64 ./make.bash</code>之类的操作报错:</p>

<pre><code>[root@iZ2ze147skj2icrqqx7nhzZ src]# GOOS=darwin GOARCH=amd64 ./make.bash
##### Building Go bootstrap tool.
cmd/dist
ERROR: Cannot find /root/go1.4/bin/_/go.
ERROR: or /root/go1.4/bin/_/go.
Set $GOROOT_BOOTSTRAP to a working Go tree &gt;= Go 1.4.
</code></pre>

<p>原因:</p>

<blockquote>
<p><a href="https://github.com/northbright/Notes/blob/master/Golang/china/install-go1.6-from-source-on-centos7-in-china.md">https://github.com/northbright/Notes/blob/master/Golang/china/install-go1.6-from-source-on-centos7-in-china.md</a>
Go1.5+的编译过程需要Go1.4的二进来实现 bootstrap（自举）(简单来说: Go需要Go自身来编译)。</p>
</blockquote>

<p>解决方法:</p>

<pre><code>#clone到家目录
git clone https://github.com/golang/go.git ~/go1.4
#切换分支
git checkout -b 1.4.3 go1.4.3
cd src
./all.bash
</code></pre>

<p>操作完成,再重新尝试。</p>

<p><strong>可能与服务器80、443端口冲突的问题</strong></p>

<p>可以使用其他端口:</p>

<pre><code>./ngrokd -domain=&quot;tunnel.tyrad.cc&quot; -httpAddr=&quot;:8080&quot; -httpsAddr=&quot;:8087&quot;
</code></pre>

<blockquote>
<p>几处参考
1) 可以采用docker <a href="https://fengqi.me/unix/409.html">https://fengqi.me/unix/409.html</a></p>
</blockquote>

<p><strong>隔一段时间自动断连接?</strong></p>

<p>服务端报错:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="color:#000">[</span><span style="color:#1c01ce">16</span>:<span style="color:#1c01ce">09</span>:<span style="color:#1c01ce">32</span> <span style="color:#000">CST</span> <span style="color:#1c01ce">2017</span><span style="color:#000">/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">INFO</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Info:83) [ctl:61724a1d] [fe081219c8315a1d536d2b7ec5d6f463] Lost heartbeat
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">INFO</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Info:83) [registry] [ctl] Removed control registry id fe081219c8315a1d536d2b7ec5d6f463
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">DEBG</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Debug:79) [ctl:61724a1d] [fe081219c8315a1d536d2b7ec5d6f463] Closing
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">INFO</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Info:83) [http://aaabc.tunnel.tyrad.cc] Shutting down
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">INFO</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Info:83) [https://aaabc.tunnel.tyrad.cc] Shutting down
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">DEBG</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Debug:79) [pxy:4db711a4] [fe081219c8315a1d536d2b7ec5d6f463] Closing
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">INFO</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Info:83) [ctl:61724a1d] [fe081219c8315a1d536d2b7ec5d6f463] Shutdown complete
</span><span style="color:#c41a16">[16:09:32 CST 2017/</span><span style="color:#1c01ce">07</span><span style="color:#000">/</span><span style="color:#1c01ce">17</span><span style="color:#000">]</span> <span style="color:#000">[</span><span style="color:#000">WARN</span><span style="color:#000">]</span> (<span style="color:#000">ngrok</span><span style="color:#c41a16">/log.(*PrefixLogger).Warn:87) [ctl:61724a1d] [fe081219c8315a1d536d2b7ec5d6f463] Control::reader failed with error read tcp 172.17.71.179:4443-&gt;58.56.94.34:53190: use of closed network connection: goroutine 47 [running]:
</span><span style="color:#c41a16">runtime/</span><span style="color:#000">debug</span><span style="color:#000">.</span><span style="color:#000">Stack</span>(<span style="color:#1c01ce">0x0</span>, <span style="color:#1c01ce">0x0</span>, <span style="color:#1c01ce">0x0</span>)
	<span style="color:#c41a16">/usr/</span><span style="color:#000">lib</span><span style="color:#c41a16">/golang/s</span><span style="color:#000">rc</span><span style="color:#c41a16">/runtime/</span><span style="color:#000">debug</span><span style="color:#c41a16">/stack.go:24 +0x80
</span><span style="color:#c41a16">ngrok/se</span><span style="color:#000">rver</span><span style="color:#000">.</span>(<span style="color:#000">*</span><span style="color:#000">Control</span>)<span style="color:#000">.</span><span style="color:#000">reader</span><span style="color:#000">.</span><span style="color:#000">func1</span>(<span style="color:#1c01ce">0xc8202fa1b0</span>)
	<span style="color:#c41a16">/root/n</span><span style="color:#000">grok</span><span style="color:#c41a16">/src/n</span><span style="color:#000">grok</span><span style="color:#c41a16">/server/</span><span style="color:#000">control</span><span style="color:#000">.</span><span style="color:#000">go</span>:<span style="color:#1c01ce">229</span> <span style="color:#000">+</span><span style="color:#1c01ce">0x53</span>
<span style="color:#000">panic</span>(<span style="color:#1c01ce">0x829580</span>, <span style="color:#1c01ce">0xc82045c9b0</span>)
	<span style="color:#c41a16">/usr/</span><span style="color:#000">lib</span><span style="color:#c41a16">/golang/s</span><span style="color:#000">rc</span><span style="color:#c41a16">/runtime/</span><span style="color:#000">panic</span><span style="color:#000">.</span><span style="color:#000">go</span>:<span style="color:#1c01ce">443</span> <span style="color:#000">+</span><span style="color:#1c01ce">0x4e9</span>
<span style="color:#000">ngrok</span><span style="color:#c41a16">/server.(*Control).reader(0xc8202fa1b0)
</span><span style="color:#c41a16">	/</span><span style="color:#000">root</span><span style="color:#c41a16">/ngrok/s</span><span style="color:#000">rc</span><span style="color:#c41a16">/ngrok/se</span><span style="color:#000">rver</span><span style="color:#c41a16">/control.go:246 +0x1cb
</span><span style="color:#c41a16">created by ngrok/se</span><span style="color:#000">rver</span><span style="color:#000">.</span><span style="color:#000">NewControl</span>
	<span style="color:#c41a16">/root/n</span><span style="color:#000">grok</span><span style="color:#c41a16">/src/n</span><span style="color:#000">grok</span><span style="color:#c41a16">/server/</span><span style="color:#000">control</span><span style="color:#000">.</span><span style="color:#000">go</span>:<span style="color:#1c01ce">124</span> <span style="color:#000">+</span><span style="color:#1c01ce">0x98a</span></code></pre></div>
<p>暂时没有解决 (⊙﹏⊙)b</p>

<h2 id="参考">参考</h2>

<blockquote>
<p><a href="https://git-scm.com/book/zh/v1/起步-安装-Git">https://git-scm.com/book/zh/v1/起步-安装-Git</a>
<a href="https://git-scm.com/download/linux">https://git-scm.com/download/linux</a>
<a href="https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/01.1.md">https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/01.1.md</a></p>

<p><a href="https://github.com/northbright/Notes/blob/master/Golang/china/install-go1.6-from-source-on-centos7-in-china.md">https://github.com/northbright/Notes/blob/master/Golang/china/install-go1.6-from-source-on-centos7-in-china.md</a>
<a href="http://www.jianshu.com/p/b254547b9fe5">http://www.jianshu.com/p/b254547b9fe5</a></p>
</blockquote>

<p>问题:</p>

<ol>
<li>微信的80端口和apache的冲突</li>
<li>apache 443端口冲突,必须要关闭apache?</li>
</ol>
</div><div id="sidebar" class="column col-2 col-md-12">
                    <div id='toc' class="sidebar-content toc-fixed"><nav id="TableOfContents">
<ul>
<li><a href="#下载编译好的客户端-服务端">下载编译好的客户端/服务端</a>
<ul>
<li><a href="#服务端启动命令">服务端启动命令</a></li>
<li><a href="#客户端配置">客户端配置</a></li>
</ul></li>
<li><a href="#自己编译客户端">自己编译客户端</a>
<ul>
<li><a href="#安装git-golang">安装git、golang</a>
<ul>
<li><a href="#安装git">安装git</a></li>
<li><a href="#安装golang">安装golang</a></li>
</ul></li>
<li><a href="#配置ngrok">配置ngrok</a></li>
<li><a href="#编译服务端">编译服务端</a></li>
<li><a href="#编译客户端">编译客户端</a></li>
<li><a href="#运行">运行</a>
<ul>
<li><a href="#启动服务端">启动服务端</a></li>
<li><a href="#启动客户端">启动客户端</a></li>
</ul></li>
<li><a href="#错误分析">错误分析</a></li>
<li><a href="#参考">参考</a></li>
</ul></li>
</ul>
</nav></div>
                    <script src="https://www.tyrad.cc/js/toc.js"></script>
                </div></div>
        </section>
    </section>
</section>
    </div>

             
    <section id="footer" class="section bg-gray">
        <section class="container">
            <p><a href="/">© 2019 </a> <i class="fa fa-code"></i> with <i
                    class="fa fa-heart-o pulse "></i> by <a href="/">hugo</a>.</p>
        </section>
    </section>
    
    <div class="mobile-container">
        <div class="overlay" id="overlay">
            <div class="mobile-logo"><a href="https://www.tyrad.cc" class="navbar-brand mr-10">
    
    

    <svg height="146px" viewBox="0 0 452 146" version="1.1" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink">
        <g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="black-37249" transform="translate(1.493827, 14.000000)" fill="#000000" fill-rule="nonzero">
                <path
                    d="M49.1575565,105.3356 C58.6514419,107.744266 56.8866035,117.059598 47.336582,117.946151 C42.200257,119.088059 32.5122345,116.823453 40.3049269,121.756528 C38.9160522,122.059136 31.4488504,121.215252 34.0530212,124.835545 C49.3931802,133.332539 76.1538235,115.03264 58.9252282,100.789887 C52.729951,96.9744155 44.6696275,99.6170026 49.1574334,105.335227 L49.1575565,105.3356 Z"
                    id="路径"></path>
                <path
                    d="M19.6456893,70.1148 C22.442564,67.6540154 27.5058454,64.8429245 31.2812983,65.0068451 C34.6705665,65.8322497 35.5828047,67.0095653 39.186732,72.7438254 C42.8052895,78.5014146 47.9529463,97.2035504 46.1250646,102.790183 C44.2922642,108.392369 38.9206152,112.836988 32.033488,115.798916 C26.5426541,118.077388 16.2140442,117.216187 11.6635736,112.33745 C7.2203064,106.943992 10.4439768,99.2077518 14.1196674,94.0765913 C17.8286541,88.8988961 15.684207,74.5702816 19.6458155,70.1143062 L19.6456893,70.1148 Z"
                    id="路径"></path>
                <path
                    d="M1.04535518,39.6272974 C4.05921119,39.3911165 4.59137567,39.1071824 5.59060008,38.0238167 C6.58982449,36.9404509 5.54928544,35.2576243 6.19663273,34.5114663 C6.84398002,33.7653083 8.10097246,32.9215361 9.07530028,33.5952113 C10.0496281,34.2688865 10.1138613,37.3267543 9.37831661,38.4819379 C8.64277193,39.6371215 5.43905457,40.0090086 5.43905457,40.0090086 L-0.469776243,41.8414683 C-1.16205066,72.2197737 13.1673278,72.6175072 32.5592772,62.9150689 C34.2888429,65.128073 36.8652659,66.7978007 39.3430985,68.5308898 C41.0289707,68.9713953 42.7656319,69.3673848 46.0436407,68.4125409 C52.7893702,66.6134557 67.7858277,37.9865577 58.6189054,24.5853236 C59.5609921,22.3072017 58.5329188,17.6980103 54.831139,9.92564579 C51.5837531,14.9810013 48.3835461,17.0014121 44.9911376,18.7424057 C39.7628549,17.4246155 36.1260864,16.8411895 31.0440711,17.2556102 C32.114064,10.6923806 28.9520111,5.60816741 24.8321244,0 C14.7334474,6.21819269 9.90786696,14.7224118 6.65139374,20.7687134 C4.38306595,26.7113784 -1.96157957,39.8636841 1.04555436,39.6278043 L1.04535518,39.6272974 Z"
                    id="路径"></path>
            </g>
            <text id="TYRAD" font-family="STBaoliSC-Regular, Baoli SC" font-size="116" font-weight="normal"
                fill="#000000">
                <tspan x="87" y="106">TYRAD</tspan>
            </text>
        </g>
    </svg>

    
    

    
</a></div>
            <nav class="overlay-menu">

<ul class=" tree treemenu treemenu-root "><li>
        <a href="/" title="Home page"
            class="">Home</a>
    </li><li>
        <a href="/archives/" title="Archives page"
            class="">Archives</a>
    </li><li>
        <a href="/wiki/" title="Wiki page"
            class="">Wiki</a>
    </li><li>
        <a href="/tools/" title="Tools page"
            class="">Tools</a>
        <ul><li>
                <a href="/tools/json/" class="">JSON解析</a>
            </li><li>
                <a href="/tools/rsa/" class="">RSA测试</a>
            </li><li>
                <a href="/tools/knowlegenav/" class="">导航</a>
            </li></ul>
    </li><li>
        <a href="/about/" title="About page"
            class="">About</a>
    </li></ul></nav>
        </div>
    </div>
    <script src="https://www.tyrad.cc/js/jquery-2.x.min.js"></script>
    <script src="https://www.tyrad.cc/js/jquery.treemenu.js"></script>
    <script src="https://www.tyrad.cc/js/site.js"></script>
    <script src="https://www.tyrad.cc/js/baidu.js"></script>
    
</body>

</html>